# üß† LLM-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—É–º–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∞–ª–µ—Ä—Ç–æ–≤** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ—à–µ–Ω–∏–π LLM (Large Language Model). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–≤–∞–∂–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è.

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**
```python
# LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
classification_result = {
    "severity": "noise",           # noise, info, warning, critical
    "confidence": 0.85,            # 0.0 - 1.0
    "reasoning": "–≠—Ç–æ –æ–±—ã—á–Ω—ã–π health check, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è",
    "recommendations": ["–ú–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å"]
}
```

### 2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**
```python
# Filter Engine –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ LLM —Ä–µ—à–µ–Ω–∏—è
if classification.severity == "noise":
    return FilterAction.DENY  # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–ª–µ—Ä—Ç
elif classification.confidence < 0.3:
    return FilterAction.DENY  # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–ª–µ—Ä—Ç—ã —Å –Ω–∏–∑–∫–∏–º confidence
```

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### **–ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–≤–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**

#### 1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ noise –∞–ª–µ—Ä—Ç–æ–≤**
```python
FilterRule(
    name="block_noise_alerts",
    action=FilterAction.DENY,
    conditions={"llm_severity": "noise"},
    priority=10,
    enabled=True,
)
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ LLM –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª –∫–∞–∫ "—à—É–º"

#### 2. **–ü—Ä–æ–ø—É—Å–∫ critical –∞–ª–µ—Ä—Ç–æ–≤**
```python
FilterRule(
    name="allow_critical_alerts",
    action=FilterAction.ALLOW,
    conditions={"llm_severity": "critical"},
    priority=1,
    enabled=True,
)
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã

#### 3. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∏–∑–∫–æ–º—É confidence**
```python
FilterRule(
    name="min_confidence_threshold",
    action=FilterAction.DENY,
    conditions={
        "llm_confidence_below": 0.3,
        "has_llm_classification": True,
    },
    priority=20,
    enabled=True,
)
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç—ã —Å confidence < 0.3

#### 4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ false positives**
```python
FilterRule(
    name="block_false_positives",
    action=FilterAction.DENY,
    conditions={"llm_severity": "false_positive"},
    priority=8,
    enabled=True,
)
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ LLM –æ–ø—Ä–µ–¥–µ–ª–∏–ª –∫–∞–∫ –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å):**

#### 5. **–°—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ confidence**
```python
FilterRule(
    name="high_confidence_only",
    action=FilterAction.ALLOW,
    conditions={
        "llm_confidence_above": 0.7,
        "has_llm_classification": True,
    },
    priority=5,
    enabled=False,  # –í–∫–ª—é—á–∏—Ç—å –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
)
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–ª–µ—Ä—Ç—ã —Å confidence > 0.7

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —à—É–º–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤**
```json
// –í—Ö–æ–¥—è—â–∏–π –∞–ª–µ—Ä—Ç
{
  "alertname": "HighCPUUsage",
  "labels": {"instance": "web-server-1"},
  "annotations": {"description": "CPU usage is high"}
}

// LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
{
  "severity": "noise",
  "confidence": 0.9,
  "reasoning": "–≠—Ç–æ –æ–±—ã—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞"
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ê–ª–µ—Ä—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (–Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è)
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–ª–µ—Ä—Ç–∞**
```json
// –í—Ö–æ–¥—è—â–∏–π –∞–ª–µ—Ä—Ç
{
  "alertname": "DatabaseConnectionFailed",
  "labels": {"instance": "db-primary"},
  "annotations": {"description": "Database connection lost"}
}

// LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
{
  "severity": "critical",
  "confidence": 0.95,
  "reasoning": "–ü–æ—Ç–µ—Ä—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã"
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ê–ª–µ—Ä—Ç –ø—Ä–æ–ø—É—â–µ–Ω (–ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤–æ –≤—Å–µ targets)
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∏–∑–∫–æ–º—É confidence**
```json
// –í—Ö–æ–¥—è—â–∏–π –∞–ª–µ—Ä—Ç
{
  "alertname": "UnknownError",
  "labels": {"instance": "app-server"},
  "annotations": {"description": "Unknown error occurred"}
}

// LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
{
  "severity": "warning",
  "confidence": 0.2,
  "reasoning": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏"
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ê–ª–µ—Ä—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (confidence < 0.3)
```

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### **–í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª:**
```python
# –ß–µ—Ä–µ–∑ API
POST /proxy/filters/rules
{
    "name": "custom_rule",
    "action": "deny",
    "conditions": {
        "llm_severity": "noise",
        "llm_confidence_below": 0.5
    },
    "priority": 15,
    "enabled": true
}
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
curl http://localhost:8000/proxy/stats

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
    "filtered_alerts": 25,
    "published_alerts": 150,
    "filter_stats": {
        "block_noise_alerts": 15,
        "min_confidence_threshold": 8,
        "block_false_positives": 2
    }
}
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### **–ú–µ—Ç—Ä–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- `alert_history_filtered_alerts_total` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤
- `alert_history_filter_rule_matches_total` - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- `alert_history_llm_classification_confidence` - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ confidence

### **Grafana Dashboard:**
```yaml
# –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è Grafana
rate(alert_history_filtered_alerts_total[5m]) / rate(alert_history_webhook_events_total[5m])
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### **–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- [ ] **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- [ ] **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - —É–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞** - —Ä–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–∞–Ω–¥/—Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- [ ] **Slack feedback** - –∫–Ω–æ–ø–∫–∏ "–≠—Ç–æ –±—ã–ª–æ –≤–∞–∂–Ω–æ/–Ω–µ –≤–∞–∂–Ω–æ" –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- [ ] **Jira integration** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤
- [ ] **PagerDuty escalation** - —ç—Å–∫–∞–ª–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### **1. –ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª**
```python
# –°–Ω–∞—á–∞–ª–∞ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –æ—á–µ–≤–∏–¥–Ω—ã–π —à—É–º
{"llm_severity": "noise", "llm_confidence_above": 0.8}
```

### **2. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–∂–µ—Å—Ç–æ—á–∞–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é**
```python
# –ü–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
{"llm_confidence_below": 0.3}
```

### **3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ false negatives**
```python
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∞–ª–µ—Ä—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, –Ω–æ –æ–∫–∞–∑–∞–ª–∏—Å—å –≤–∞–∂–Ω—ã–º–∏
```

### **4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö targets**
```python
# Slack: –±–æ–ª–µ–µ –º—è–≥–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
# PagerDuty: —Å—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
# Email: —Å—Ä–µ–¥–Ω—è—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### **–ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∞–ª–µ—Ä—Ç–æ–≤ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è**
**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç–µ —Å—Ç—Ä–æ–≥–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ confidence threshold

### **–ü—Ä–æ–±–ª–µ–º–∞: –í–∞–∂–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è**
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –ø—Ä–∞–≤–∏–ª

### **–ü—Ä–æ–±–ª–µ–º–∞: LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞**
**–†–µ—à–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤ transparent mode
