# Alert History Service Environment Variables
# Copy this file to .env and adjust values for your environment

# =============================================================================
# SERVICE METADATA (12-Factor App)
# =============================================================================
SERVICE_NAME=alert-history
SERVICE_VERSION=1.0.0
ENVIRONMENT=development

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
HOST=0.0.0.0
PORT=8080
DEBUG=false
RELOAD=false
WORKERS=1
LOG_LEVEL=INFO

# =============================================================================
# LOGGING CONFIGURATION (12-Factor: logs to stdout)
# =============================================================================
LOG_JSON=true
LOG_CORRELATION=true
STRUCTURED_LOGS=true
LOG_REQUESTS=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# SQLite (default for development)
DATABASE_URL=sqlite:///alert_history.db

# PostgreSQL (production)
# DATABASE_URL=postgresql://user:password@host:5432/alert_history
DATABASE_POOL_SIZE=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_ECHO=false

# PostgreSQL configuration (T1.2 - recommended for production)
# DATABASE_POSTGRES_URL=postgresql://user:password@localhost:5432/alert_history
DATABASE_MIN_POOL_SIZE=5
DATABASE_MAX_POOL_SIZE=20
DATABASE_COMMAND_TIMEOUT=60.0
DATABASE_QUERY_TIMEOUT=30.0
DATABASE_ENABLE_MIGRATIONS=true
DATABASE_AUTO_MIGRATE=false

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_POOL_SIZE=10
REDIS_POOL_TIMEOUT=30
REDIS_KEEPALIVE=true

# =============================================================================
# LLM SERVICE CONFIGURATION
# =============================================================================
LLM_ENABLED=false
LLM_API_KEY=
LLM_BASE_URL=http://localhost:8000
LLM_TIMEOUT=30
LLM_MAX_RETRIES=3
LLM_MODEL_NAME=gpt-4

# =============================================================================
# INTELLIGENT PROXY CONFIGURATION
# =============================================================================
PROXY_ENABLED=true
METRICS_ONLY_MODE=false
TARGET_DISCOVERY_ENABLED=true
TARGET_REFRESH_INTERVAL=300

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true
PROMETHEUS_ENABLED=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
CORS_ENABLED=true
CORS_ORIGINS=*
RATE_LIMITING_ENABLED=false
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# TARGET DISCOVERY (Publishing Targets)
# =============================================================================
# Kubernetes namespaces to search for publishing targets
TARGET_DISCOVERY_NAMESPACES=default,monitoring,alert-history

# Label selector for target discovery
TARGET_DISCOVERY_LABELS=alert-history.io/target=true

# =============================================================================
# PRODUCTION EXAMPLE
# =============================================================================
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=INFO
# WORKERS=4
# DATABASE_URL=postgresql://alert_history:password@postgres:5432/alert_history
# REDIS_URL=redis://redis:6379/0
# LLM_ENABLED=true
# LLM_API_KEY=your-production-llm-api-key
