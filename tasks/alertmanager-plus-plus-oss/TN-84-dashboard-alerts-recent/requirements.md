# TN-84: GET /api/dashboard/alerts/recent - Requirements

## 1. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

### 1.1 –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç

Dashboard —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (TN-77) —Ç—Ä–µ–±—É–µ—Ç API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–µ–∫—Ü–∏–∏ "Recent Alerts". Endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è dashboard –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ classification –¥–∞–Ω–Ω—ã—Ö
- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (< 100ms –¥–ª—è 10-20 –∞–ª–µ—Ä—Ç–æ–≤)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ severity

### 1.2 –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### US-1: Dashboard User - –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤
**–ö–∞–∫** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å dashboard
**–Ø —Ö–æ—á—É** –≤–∏–¥–µ—Ç—å –Ω–µ–¥–∞–≤–Ω–∏–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
**–ß—Ç–æ–±—ã** –±—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é —Å –∞–ª–µ—Ä—Ç–∞–º–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:**
- [ ] GET /api/dashboard/alerts/recent –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤
- [ ] –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 10 –∞–ª–µ—Ä—Ç–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ —á–µ—Ä–µ–∑ limit)
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 100ms (p95)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ status (firing/resolved)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ severity (critical/warning/info/noise)

#### US-2: Dashboard Developer - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å classification
**–ö–∞–∫** —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ dashboard
**–Ø —Ö–æ—á—É** –ø–æ–ª—É—á–∞—Ç—å classification –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–µ —Å –∞–ª–µ—Ä—Ç–∞–º–∏
**–ß—Ç–æ–±—ã** –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ dashboard

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:**
- [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `include_classification=true`
- [ ] Classification –¥–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ response –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ
- [ ] Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ classification

---

## 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### FR-1: –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH (P0)
**–û–ø–∏—Å–∞–Ω–∏–µ:** Endpoint –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤

**–î–µ—Ç–∞–ª–∏:**
- GET /api/dashboard/alerts/recent
- Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `limit` (int, default: 10, max: 50) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–µ—Ä—Ç–æ–≤
  - `status` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (firing/resolved)
  - `severity` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ severity (critical/warning/info/noise)
  - `include_classification` (bool, default: false) - –≤–∫–ª—é—á–∏—Ç—å classification –¥–∞–Ω–Ω—ã–µ
- Response: JSON —Å –º–∞—Å—Å–∏–≤–æ–º –∞–ª–µ—Ä—Ç–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- `AlertHistoryRepository.GetRecentAlerts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤
- `ClassificationEnricher.EnrichAlerts()` - –æ–±–æ–≥–∞—â–µ–Ω–∏–µ classification (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### FR-2: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH (P0)
**–û–ø–∏—Å–∞–Ω–∏–µ:** Response –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –¥–ª—è dashboard

**–î–µ—Ç–∞–ª–∏:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π: fingerprint, alert_name, status, severity, starts_at
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è: summary, labels (—Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ), classification (–µ—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–æ)
- –ò—Å–∫–ª—é—á–∏—Ç—å: –ø–æ–ª–Ω—ã–µ annotations, generator_url, ends_at (–µ—Å–ª–∏ –Ω–µ resolved)

### FR-3: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM (P1)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ status –∏ severity

**–î–µ—Ç–∞–ª–∏:**
- –§–∏–ª—å—Ç—Ä –ø–æ status: firing –∏–ª–∏ resolved
- –§–∏–ª—å—Ç—Ä –ø–æ severity: critical, warning, info, noise
- –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ repository (SQL WHERE)

### FR-4: Classification Integration
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM (P1)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ classification –¥–∞–Ω–Ω—ã—Ö

**–î–µ—Ç–∞–ª–∏:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä `include_classification=true` –≤–∫–ª—é—á–∞–µ—Ç classification
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ClassificationEnricher –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è
- Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ classification service

---

## 3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### NFR-1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH
**–û–ø–∏—Å–∞–Ω–∏–µ:** Endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±—ã—Å—Ç—Ä—ã–º –¥–ª—è dashboard –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: < 100ms (p95) –¥–ª—è 10 –∞–ª–µ—Ä—Ç–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: < 200ms (p95) –¥–ª—è 50 –∞–ª–µ—Ä—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 50 concurrent requests

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Response time: < 100ms (p95)
- Throughput: > 100 req/s

### NFR-2: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–ª–µ—Ä—Ç–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ SQL queries —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ response (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 5-10 —Å–µ–∫—É–Ω–¥)
- Limit –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (50 –∞–ª–µ—Ä—Ç–æ–≤)

### NFR-3: –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º dashboard (TN-77)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (AlertHistoryRepository, ClassificationEnricher)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ breaking changes

---

## 4. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Upstream (–í—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã ‚úÖ)
- ‚úÖ **TN-37**: Alert History Repository (150%, Grade A+)
- ‚úÖ **TN-77**: Modern Dashboard Page (150%, Grade A+)
- ‚úÖ **TN-80**: Classification Display (150%, Grade A+)
- ‚úÖ **TN-32**: AlertStorage (100%)

### Downstream (Unblocked)
- üéØ **TN-81**: GET /api/dashboard/overview (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç endpoint)

---

## 5. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### Risk 1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è
**Probability:** LOW
**Impact:** MEDIUM
**Mitigation:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π GetRecentAlerts (—É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ response (5-10 —Å–µ–∫—É–Ω–¥)
- Limit –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–µ—Ä—Ç–æ–≤ (max 50)

### Risk 2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å /history/recent
**Probability:** MEDIUM
**Impact:** LOW
**Mitigation:**
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: /history/recent (–ø–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç), /api/dashboard/alerts/recent (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π)
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —á–µ—Ä–µ–∑ helper —Ñ—É–Ω–∫—Ü–∏–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–∏–π

---

## 6. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

### Must Have (P0)
- [ ] GET /api/dashboard/alerts/recent –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä limit (default: 10, max: 50)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ status
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ severity
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 100ms (p95) –¥–ª—è 10 –∞–ª–µ—Ä—Ç–æ–≤
- [ ] Response —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### Should Have (P1)
- [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ classification –¥–∞–Ω–Ω—ã—Ö
- [ ] Response caching (5-10 —Å–µ–∫—É–Ω–¥)
- [ ] Prometheus metrics –¥–ª—è endpoint

### Nice to Have (P2)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ pagination (offset/limit)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ sorting (–ø–æ starts_at)

---

## 7. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

### –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Target: 150%)
- **Implementation:** 100% (–≤—Å–µ FR —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
- **Testing:** 150% (comprehensive test suite, 90%+ coverage)
- **Documentation:** 150% (comprehensive docs, examples)
- **Performance:** 150% (–≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–µ–≤—ã—à–∞—é—Ç targets)
- **Integration:** 100% (–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å dashboard)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Response time: < 100ms (p95) ‚úÖ
- Throughput: > 100 req/s ‚úÖ
- Cache hit rate: > 80% (–µ—Å–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ) ‚úÖ

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- Unit tests: 90%+ coverage ‚úÖ
- Integration tests: Critical paths covered ‚úÖ
- Performance tests: Response time validated ‚úÖ

---

**Document Version:** 1.0
**Last Updated:** 2025-11-20
**Author:** AI Assistant (Enterprise Architecture Team)
**Status:** ‚úÖ APPROVED FOR IMPLEMENTATION
