# TN-81: GET /api/dashboard/overview - Requirements

## 1. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

### 1.1 –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç

Dashboard —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (TN-77) —Ç—Ä–µ–±—É–µ—Ç API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–∑–æ—Ä–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã. Endpoint –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∞–ª–µ—Ä—Ç–æ–≤ (total, active, resolved, last 24h)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ classification (enabled, classified alerts, cache hit rate)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ publishing (targets, mode, successful/failed publishes)
- –°–∏—Å—Ç–µ–º–Ω–æ–º –∑–¥–æ—Ä–æ–≤—å–µ (Redis, LLM service)

### 1.2 –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### US-1: Dashboard User - –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±–∑–æ—Ä–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
**–ö–∞–∫** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å dashboard
**–Ø —Ö–æ—á—É** –≤–∏–¥–µ—Ç—å –æ–±–∑–æ—Ä–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
**–ß—Ç–æ–±—ã** –±—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ –∞–ª–µ—Ä—Ç–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:**
- [ ] GET /api/dashboard/overview –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 200ms (p95)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç –∞–ª–µ—Ä—Ç—ã, classification, publishing, health
- [ ] Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### FR-1: Alert Statistics
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH (P0)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–ª–µ—Ä—Ç–∞–º

**–î–µ—Ç–∞–ª–∏:**
- `total_alerts` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–µ—Ä—Ç–æ–≤
- `active_alerts` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (firing) –∞–ª–µ—Ä—Ç–æ–≤
- `resolved_alerts` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö (resolved) –∞–ª–µ—Ä—Ç–æ–≤
- `alerts_last_24h` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–µ—Ä—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- `AlertHistoryRepository.GetHistory()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤

### FR-2: Classification Statistics
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH (P0)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ classification

**–î–µ—Ç–∞–ª–∏:**
- `classification_enabled` - –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ classification
- `classified_alerts` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤
- `classification_cache_hit_rate` - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à
- `llm_service_available` - –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ LLM —Å–µ—Ä–≤–∏—Å

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- `ClassificationService.GetStats()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ classification
- `ClassificationService.Health()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ LLM

### FR-3: Publishing Statistics
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM (P1)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ publishing

**–î–µ—Ç–∞–ª–∏:**
- `publishing_targets` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ publishing targets
- `publishing_mode` - —Ä–µ–∂–∏–º publishing (intelligent/metrics_only)
- `successful_publishes` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- `failed_publishes` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- `TargetDiscoveryManager.ListTargets()` - —Å–ø–∏—Å–æ–∫ targets
- `PublishingStatsHandler` –∏–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ publishing

### FR-4: System Health
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM (P1)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ

**–î–µ—Ç–∞–ª–∏:**
- `system_healthy` - –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `redis_connected` - –ø–æ–¥–∫–ª—é—á–µ–Ω –ª–∏ Redis
- `llm_service_available` - –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ LLM —Å–µ—Ä–≤–∏—Å

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- `Cache.HealthCheck()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ Redis
- `ClassificationService.Health()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ LLM

---

## 3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### NFR-1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH
**–û–ø–∏—Å–∞–Ω–∏–µ:** Endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±—ã—Å—Ç—Ä—ã–º

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: < 200ms (p95)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 50 concurrent requests
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ response (10-30 —Å–µ–∫—É–Ω–¥)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Response time: < 200ms (p95)
- Throughput: > 50 req/s

### NFR-2: –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH
**–û–ø–∏—Å–∞–Ω–∏–µ:** Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ classification service (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç defaults)
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ publishing system (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç defaults)
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç defaults)
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤–µ—Å—å endpoint

---

## 4. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Upstream (–í—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã ‚úÖ)
- ‚úÖ **TN-37**: Alert History Repository (150%, Grade A+)
- ‚úÖ **TN-33**: Classification Service (150%, Grade A+)
- ‚úÖ **TN-77**: Modern Dashboard Page (150%, Grade A+)
- ‚úÖ **TN-84**: GET /api/dashboard/alerts/recent (150%, Grade A+)

### Downstream (Unblocked)
- üéØ **TN-83**: GET /api/dashboard/health (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç endpoint)

---

## 5. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### Risk 1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è
**Probability:** MEDIUM
**Impact:** MEDIUM
**Mitigation:**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ response (10-30 —Å–µ–∫—É–Ω–¥)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (goroutines)
- Timeout –Ω–∞ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (5 —Å–µ–∫—É–Ω–¥)

### Risk 2: –ß–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç endpoint
**Probability:** LOW
**Impact:** HIGH
**Mitigation:**
- Graceful degradation –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç
- –í–æ–∑–≤—Ä–∞—Ç defaults –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## 6. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

### Must Have (P0)
- [ ] GET /api/dashboard/overview –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç –∞–ª–µ—Ä—Ç—ã (total, active, resolved, last 24h)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç classification (enabled, classified, cache hit rate)
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 200ms (p95)
- [ ] Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Should Have (P1)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç publishing (targets, mode, success/fail)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç system health (Redis, LLM)
- [ ] Response caching (10-30 —Å–µ–∫—É–Ω–¥)
- [ ] Prometheus metrics –¥–ª—è endpoint

### Nice to Have (P2)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (last 1h, 24h, 7d)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

---

## 7. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

### –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Target: 150%)
- **Implementation:** 100% (–≤—Å–µ FR —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
- **Testing:** 150% (comprehensive test suite, 90%+ coverage)
- **Documentation:** 150% (comprehensive docs, examples)
- **Performance:** 150% (–≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–µ–≤—ã—à–∞—é—Ç targets)
- **Integration:** 100% (–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å dashboard)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Response time: < 200ms (p95) ‚úÖ
- Throughput: > 50 req/s ‚úÖ
- Cache hit rate: > 80% (–µ—Å–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ) ‚úÖ

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- Unit tests: 90%+ coverage ‚úÖ
- Integration tests: Critical paths covered ‚úÖ
- Performance tests: Response time validated ‚úÖ

---

**Document Version:** 1.0
**Last Updated:** 2025-11-20
**Author:** AI Assistant (Enterprise Architecture Team)
**Status:** ‚úÖ APPROVED FOR IMPLEMENTATION
